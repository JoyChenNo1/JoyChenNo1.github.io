<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head><!-- hexo injector head_begin start --><link href="/css/tag-common/index.css" rel="stylesheet"/><!-- hexo injector head_begin end -->
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">













    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            拆书系列之《深度探索 C++ 对象模型》 | 
        
        进阶之路
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content=",C++ 对象模型">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?Dp7k2X9uh6CgQx67yceHxQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?CC5Yjp011Bf1QgvH2to+Cw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/tomorrow-night-bright.min.css?POjR8UWU/nzYlm7nv2wGjQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "monaco", Helvetica, "PingFang SC", "Hiragino Sans GB", Arial, sans-serif, monaco;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #333332 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #333332 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #333332 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #2a2d37;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="进阶之路">
    <meta name="msapplication-starturl" content="http://example.com/2022/06/18/C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/%E6%8B%86%E4%B9%A6%E7%B3%BB%E5%88%97%E4%B9%8B%E3%80%8A%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%B4%A2%20C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E3%80%8B/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="进阶之路">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://example.com/2022/06/18/C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/%E6%8B%86%E4%B9%A6%E7%B3%BB%E5%88%97%E4%B9%8B%E3%80%8A%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%B4%A2%20C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E3%80%8B/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="拆书系列之《深度探索 C++ 对象模型》 | 进阶之路">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="">
    <meta property="og:article:tag" content="C++ 对象模型"> 

    
        <meta property="article:published_time" content="Sat Jun 18 2022 19:33:20 GMT+0800">
        <meta property="article:modified_time" content="Sat Jun 18 2022 19:33:20 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://example.com/2022/06/18/C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/%E6%8B%86%E4%B9%A6%E7%B3%BB%E5%88%97%E4%B9%8B%E3%80%8A%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%B4%A2%20C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E3%80%8B/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://example.com/2022/06/18/C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/%E6%8B%86%E4%B9%A6%E7%B3%BB%E5%88%97%E4%B9%8B%E3%80%8A%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%B4%A2%20C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E3%80%8B/index.html",
    "headline": "拆书系列之《深度探索 C++ 对象模型》",
    "datePublished": "Sat Jun 18 2022 19:33:20 GMT+0800",
    "dateModified": "Sat Jun 18 2022 19:33:20 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Joy Chen",
        "image": {
            "@type": "ImageObject",
            "url": "/img/me.png"
        },
        "description": "永远怀着一颗学徒的心"
    },
    "publisher": {
        "@type": "Organization",
        "name": "进阶之路",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": ",C++ 对象模型",
    "description": "",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

<meta name="generator" content="Hexo 5.4.2"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E6%8B%86%E4%B9%A6%E7%B3%BB%E5%88%97%E4%B9%8B%E3%80%8A%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%B4%A2-C-%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E3%80%8B"><span class="post-toc-number">1.</span> <span class="post-toc-text">拆书系列之《深度探索 C++ 对象模型》</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E5%85%B3%E4%BA%8E%E5%AF%B9%E8%B1%A1%EF%BC%88Object-Lessons%EF%BC%89"><span class="post-toc-number">2.</span> <span class="post-toc-text">关于对象（Object Lessons）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%8A%A0%E4%B8%8A%E5%B0%81%E8%A3%85%E5%90%8E%E7%9A%84%E5%B8%83%E5%B1%80%E6%88%90%E6%9C%AC"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">加上封装后的布局成本</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#C-%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%EF%BC%88The-C-Object-Model%EF%BC%89"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">C++ 对象模型（The C++ Object Model）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#C-%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%EF%BC%88The-C-Object-Model%EF%BC%89-1"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">C++ 对象模型（The C++ Object Model）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%8A%A0%E4%B8%8A%E7%BB%A7%E6%89%BF%E7%9A%84-C-%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">加上继承的 C++ 对象模型</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E5%A6%82%E4%BD%95%E5%BD%B1%E5%93%8D%E7%A8%8B%E5%BA%8F"><span class="post-toc-number">2.2.3.</span> <span class="post-toc-text">对象模型如何影响程序</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B7%AE%E5%BC%82"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">对象的差异</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%8C%87%E9%92%88%E7%B1%BB%E5%9E%8B"><span class="post-toc-number">2.3.1.</span> <span class="post-toc-text">指针类型</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%8A%A0%E4%B8%8A%E5%A4%9A%E6%80%81%E4%B9%8B%E5%90%8E"><span class="post-toc-number">2.3.2.</span> <span class="post-toc-text">加上多态之后</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E6%9E%84%E9%80%A0%E8%AF%AD%E4%B9%89%E5%AD%A6%EF%BC%88The-Semantics-of-constructors%EF%BC%89"><span class="post-toc-number">3.</span> <span class="post-toc-text">构造语义学（The Semantics of constructors）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Default-Constructor-%E7%9A%84%E5%BB%BA%E6%9E%84%E6%93%8D%E4%BD%9C"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">Default Constructor 的建构操作</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%BC%96%E8%AF%91%E5%99%A8%E5%BF%85%E9%A1%BB%E5%90%88%E6%88%90%E9%BB%98%E8%AE%A4%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%844%E7%A7%8D%E6%83%85%E5%BD%A2"><span class="post-toc-number">3.1.1.</span> <span class="post-toc-text">编译器必须合成默认构造函数的4种情形</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Copy-Constructor-%E7%9A%84%E5%BB%BA%E6%9E%84%E6%93%8D%E4%BD%9C"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">Copy Constructor 的建构操作</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Data-%E8%AF%AD%E4%B9%89%E5%AD%A6%EF%BC%88The-Semantics-of-Data%EF%BC%89"><span class="post-toc-number">4.</span> <span class="post-toc-text">Data 语义学（The Semantics of Data）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%AD%97%E8%8A%82%E5%AF%B9%E9%BD%90"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">字节对齐</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Function-%E8%AF%AD%E4%B9%89%E5%AD%A6%EF%BC%88The-Semantics-of-Function%EF%BC%89"><span class="post-toc-number">5.</span> <span class="post-toc-text">Function 语义学（The Semantics of Function）</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E6%9E%84%E9%80%A0%E3%80%81%E6%9E%90%E6%9E%84%E3%80%81%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%E5%AD%A6%EF%BC%88Semantics-of-Construction-Destruction-Copy%EF%BC%89"><span class="post-toc-number">6.</span> <span class="post-toc-text">构造、析构、拷贝语义学（Semantics of Construction, Destruction, Copy）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%9E%84%E9%80%A0%E8%AF%AD%E4%B9%89%E5%AD%A6"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">构造语义学</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%A4%8D%E5%88%B6%E8%AF%AD%E4%B9%89%E5%AD%A6"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">复制语义学</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%9E%90%E6%9E%84%E8%AF%AD%E4%B9%89%E5%AD%A6"><span class="post-toc-number">6.3.</span> <span class="post-toc-text">析构语义学</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E6%89%A7%E8%A1%8C%E6%9C%9F%E8%AF%AD%E4%B9%89%E5%AD%A6%EF%BC%88Runtime-Semantics%EF%BC%89"><span class="post-toc-number">7.</span> <span class="post-toc-text">执行期语义学（Runtime Semantics）</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E7%AB%99%E5%9C%A8%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E7%9A%84%E7%B1%BB%E7%AB%AF%EF%BC%88On-the-Cusp-of-the-Object-Model%EF%BC%89"><span class="post-toc-number">8.</span> <span class="post-toc-text">站在对象模型的类端（On the Cusp of the Object Model）</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--6dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                拆书系列之《深度探索 C++ 对象模型》
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/me.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Joy Chen</strong>
        <span>6月 18, 2022</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-none-link" href="/tags/C-%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/" rel="tag">C++ 对象模型</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=拆书系列之《深度探索 C++ 对象模型》&url=http://example.com/2022/06/18/C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/%E6%8B%86%E4%B9%A6%E7%B3%BB%E5%88%97%E4%B9%8B%E3%80%8A%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%B4%A2%20C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E3%80%8B/index.html&via=Joy Chen" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://example.com/2022/06/18/C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/%E6%8B%86%E4%B9%A6%E7%B3%BB%E5%88%97%E4%B9%8B%E3%80%8A%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%B4%A2%20C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E3%80%8B/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://example.com/2022/06/18/C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/%E6%8B%86%E4%B9%A6%E7%B3%BB%E5%88%97%E4%B9%8B%E3%80%8A%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%B4%A2%20C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E3%80%8B/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    
        <a class="post_share-link" href="https://www.linkedin.com/shareArticle?mini=true&url=http://example.com/2022/06/18/C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/%E6%8B%86%E4%B9%A6%E7%B3%BB%E5%88%97%E4%B9%8B%E3%80%8A%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%B4%A2%20C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E3%80%8B/index.html&title=拆书系列之《深度探索 C++ 对象模型》" target="_blank">
            <li class="mdl-menu__item">
                分享到 LinkedIn
            </li>
        </a>
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=进阶之路&title=拆书系列之《深度探索 C++ 对象模型》&summary=&pics=http://example.com/img/favicon.png&url=http://example.com/2022/06/18/C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/%E6%8B%86%E4%B9%A6%E7%B3%BB%E5%88%97%E4%B9%8B%E3%80%8A%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%B4%A2%20C++%20%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E3%80%8B/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h1 id="拆书系列之《深度探索-C-对象模型》"><a href="#拆书系列之《深度探索-C-对象模型》" class="headerlink" title="拆书系列之《深度探索 C++ 对象模型》"></a>拆书系列之《深度探索 C++ 对象模型》</h1><p><code>参考自《深度探索 C++ 对象模型》--Stanley B.Lippman 著，侯捷译。</code></p>
<p><code>转载请注明出处。</code></p>
<h1 id="关于对象（Object-Lessons）"><a href="#关于对象（Object-Lessons）" class="headerlink" title="关于对象（Object Lessons）"></a>关于对象（Object Lessons）</h1><p><code>本章主要泛讲 C++的对象模型、struct 和 class 关键字的差异、多态下的内存布局分析等。</code></p>
<h2 id="加上封装后的布局成本"><a href="#加上封装后的布局成本" class="headerlink" title="加上封装后的布局成本"></a>加上封装后的布局成本</h2><p>C++ 在布局以及存取时间上的主要的额外负担由 <strong>virtual</strong> 引起，包括：</p>
<p><code>virtual function 机制， 用来支持 执行期绑定。</code></p>
<p><code>virtual base class， 用来实现单一共享在继承体系中。</code></p>
<p>此外，还有一些额外负担，发生在 <code>一个 derived class 和之上的 base class 转换之间。</code></p>
<br/>

<h2 id="C-对象模型（The-C-Object-Model）"><a href="#C-对象模型（The-C-Object-Model）" class="headerlink" title="C++ 对象模型（The C++ Object Model）"></a>C++ 对象模型（The C++ Object Model）</h2><p>Stroustrup 当初设计的 C++ 对象模型中， <strong>非静态数据成员（nonstatic data members）</strong> 被配置于每一个 <strong>类实例化对象（class object）</strong> 之内，<strong>静态数据成员（static data members）</strong> 、<strong>静态和非静态成员函数（static and nonstatic function members）</strong> 被存放在类实例化对象（class object）之外。</p>
<p>虚函数通过两个步骤来支持：</p>
<p>1、每一个 <strong>类</strong> 产生一堆指向 <strong>virtual functions</strong> 的指针，放在 <strong>表格（virtual table，缩写 vtbl）</strong> 中。</p>
<p>2、每一个 <strong>类实例化对象</strong> 被天际一个 <strong>指针（vptr）</strong>，指向 <strong>virtual table</strong>，<strong>vptr</strong> 的设定和重置都有类的 <strong>constructor、destructor 和 copy assignment 运算符</strong> 自动完成。 每个 <strong>类</strong>所关联的 <strong>type_info object （用以支持 runtime type identification， RTTI）</strong>也通过 <strong>virtual table</strong> 被指出来，通常放在 <strong>virtual table</strong> 的第一个 slot 处。</p>
<h3 id="C-对象模型（The-C-Object-Model）-1"><a href="#C-对象模型（The-C-Object-Model）-1" class="headerlink" title="C++ 对象模型（The C++ Object Model）"></a>C++ 对象模型（The C++ Object Model）</h3><p>比如一个类 <strong>Point</strong>：</p>
<div class="tag-common tabs" id="point"><ul class="nav-tabs"><li class="tab active"><a href="#point-1">class Point</a></li><li class="tab"><a href="#point-2">class Point 对象模型</a></li></ul><div class="tab-content"><div class="tab-pane active" id="point-1"><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">&#123;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Point</span><span class="token punctuation">(</span><span class="token keyword">float</span> xval<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">float</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">PointCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token keyword">virtual</span> ostream<span class="token operator">&amp;</span> <span class="token function">Print</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> os<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
    
<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token keyword">float</span> x_<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> point_count_<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><div class="tab-pane" id="point-2"><p>#todo 绘制 class Point 对象模型图</p></div></div></div>

<br/>

<h3 id="加上继承的-C-对象模型"><a href="#加上继承的-C-对象模型" class="headerlink" title="加上继承的 C++ 对象模型"></a>加上继承的 C++ 对象模型</h3><div class="tag-common tabs" id="继承的-c++-对象模型"><ul class="nav-tabs"><li class="tab active"><a href="#继承的-c++-对象模型-1">单一继承</a></li><li class="tab"><a href="#继承的-c++-对象模型-2">多重继承</a></li></ul><div class="tab-content"><div class="tab-pane active" id="继承的-c++-对象模型-1"><p>#todo </p></div><div class="tab-pane" id="继承的-c++-对象模型-2"><p>一个 <strong>派生类</strong> 如何在本质上模塑它的 <strong>基类</strong> 实体？</p></div></div></div>

<!-- tab 虚拟继承 -->

<!-- endtab -->

<br/>

<h3 id="对象模型如何影响程序"><a href="#对象模型如何影响程序" class="headerlink" title="对象模型如何影响程序"></a>对象模型如何影响程序</h3><br/>



<br/>

<h2 id="对象的差异"><a href="#对象的差异" class="headerlink" title="对象的差异"></a>对象的差异</h2><p>需要多少内存才能变现一个 class object ? 一般而言：</p>
<p>1、非静态数据成员的总和大小。</p>
<p>2、加上任何由于 <strong>alignment</strong> 需求而填补上去的空间。（<strong>alignment</strong> 就是字节对齐，在 32 位计算机上，alignment 通常为 4 bytes（32位），以使 bus 的 运输量达到最大效率。）</p>
<p>3、加上为了支持 <strong>virtual</strong> 而由内部产生的任何额外负担（overload）。 </p>
<h3 id="指针类型"><a href="#指针类型" class="headerlink" title="指针类型"></a>指针类型</h3><p>一个指针，不管它指向那种数据类型，指针本身所需的内存大小是固定的（32 位机器上是 4 bytes，64 位机器上是 8 bytes），指针类型只会教导编译器如何解释某个特定地址中的内存内容及其大小。</p>
<div class="tag-common tabs" id="zooanimal"><ul class="nav-tabs"><li class="tab active"><a href="#zooanimal-1">class ZooAnimal</a></li><li class="tab"><a href="#zooanimal-2">ZooAnimal 布局</a></li></ul><div class="tab-content"><div class="tab-pane active" id="zooanimal-1"><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">ZooAnimal</span> <span class="token punctuation">&#123;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">ZooAnimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">ZooAnimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Rotate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token keyword">int</span> location_<span class="token punctuation">;</span>
    String name_<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

ZooAnimal <span class="token function">za</span><span class="token punctuation">(</span><span class="token string">"Zoey"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ZooAnimal<span class="token operator">*</span> pza <span class="token operator">=</span> <span class="token operator">&amp;</span>za<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><div class="tab-pane" id="zooanimal-2"><p>todo 非派生的 class 的 object 布局和 pointer 布局</p></div></div></div>

<p>对于一个指向某个地址的 <em><em>void</em> 指针</em>*，我们并不知道他将涵盖怎样的地址，所以 <strong>不能通过它操作所指的 object</strong>。</p>
<p>对于<strong>转型（cast）</strong>，其实是一种编译器指令，它并不改变一个指针所含的真正地址，<strong>它只影响被指明的内存的大小和内容的解释方式。</strong></p>
<br/>

<h3 id="加上多态之后"><a href="#加上多态之后" class="headerlink" title="加上多态之后"></a>加上多态之后</h3><br/>

<h1 id="构造语义学（The-Semantics-of-constructors）"><a href="#构造语义学（The-Semantics-of-constructors）" class="headerlink" title="构造语义学（The Semantics of constructors）"></a>构造语义学（The Semantics of constructors）</h1><p><code>本章主要讲编译器在哪些情况下必须为没有声明构造函数的类生成必要的默认构造函数和拷贝构造函数、编译器为参数初始化、返回值初始化等做了哪些优化操作。</code></p>
<br/>

<h2 id="Default-Constructor-的建构操作"><a href="#Default-Constructor-的建构操作" class="headerlink" title="Default Constructor 的建构操作"></a>Default Constructor 的建构操作</h2><p><code>对于 C++ 新手常见的误解：</code></p>
<p><code>1、 任何 class 如果没有定义默认构造函数（default constructor），就会被合成一个出来？</code></p>
<p><code>2、编译器合成出来的默认构造函数（default constructor） 会明确设定类内每一个类数据成员的默认值？</code></p>
<p><strong>以上两个观点都不是真的！！！</strong></p>
<br/>

<p>有四种情况会导致一个类的构造函数是 <strong>non-trivial</strong>，使得编译器必须为未声明 构造函数（constructor）的类合成一个 默认构造函数（default constructor），C++ 规范称之为 <strong>隐式必要默认构造函数（implict nontrivial default constructors）</strong>。合成出来只为了满足编译器需要。</p>
<p>在 <strong>合成的默认构造函数（default constructor）</strong> 中，编译器认为 <strong>基类子对象（base class subobjects） 和 成员类对象（member class objects） 是重要的，会初始化它们</strong>。其它 非静态数据成员等初始化操作应该有编码者自行初始化。</p>
<h3 id="编译器必须合成默认构造函数的4种情形"><a href="#编译器必须合成默认构造函数的4种情形" class="headerlink" title="编译器必须合成默认构造函数的4种情形"></a>编译器必须合成默认构造函数的4种情形</h3><div class="tag-common tabs" id="必须合成默认构造函数的4种情形"><ul class="nav-tabs"><li class="tab active"><a href="#必须合成默认构造函数的4种情形-1">A</a></li><li class="tab"><a href="#必须合成默认构造函数的4种情形-2">B</a></li><li class="tab"><a href="#必须合成默认构造函数的4种情形-3">C</a></li><li class="tab"><a href="#必须合成默认构造函数的4种情形-4">D</a></li></ul><div class="tab-content"><div class="tab-pane active" id="必须合成默认构造函数的4种情形-1"><p><strong>1、该类中的成员对象（Member Class Object），带有默认构造函数（Default Constructor）</strong></p></div><div class="tab-pane" id="必须合成默认构造函数的4种情形-2"><p><strong>2、该类派生自带有默认构造函数（Default Constructor）的基类（Base Class）</strong></p></div><div class="tab-pane" id="必须合成默认构造函数的4种情形-3"><p><strong>3、该类中存在虚函数（Virtual Function）</strong></p></div><div class="tab-pane" id="必须合成默认构造函数的4种情形-4"><p><strong>4、该类的继承链中，存在虚继承，即该类的基类是虚基类（Virtual Base Class）</strong></p></div></div></div>

<br/>

<h2 id="Copy-Constructor-的建构操作"><a href="#Copy-Constructor-的建构操作" class="headerlink" title="Copy Constructor 的建构操作"></a>Copy Constructor 的建构操作</h2><p>在此，之前，我们需要知道 <strong>Bitwise Copy</strong> 和 <strong>Memberwise Copy</strong> 的区别（参考自 <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/42749439/what-is-the-difference-between-memberwise-copy-bitwise-copy-shallow-copy-and-d%EF%BC%89%EF%BC%9A">https://stackoverflow.com/questions/42749439/what-is-the-difference-between-memberwise-copy-bitwise-copy-shallow-copy-and-d）：</a></p>
<table>
<thead>
<tr>
<th align="center">Bitwise Copy</th>
<th align="center">Memberwise Copy</th>
</tr>
</thead>
<tbody><tr>
<td align="center">浅拷贝的一种形式，通过 <strong>memcopy</strong> 类似的操作实现 <strong>源对象-&gt;目标对象</strong> 的 <strong>按位拷贝</strong>，<strong>不关联类对象的 构造函数（Constructor）调用。</strong></td>
<td align="center">深拷贝的一种形式，<strong>走访每一个对象成员并且显式地拷贝它们，关联调用它们的构造函数（Constructor）</strong>。</td>
</tr>
<tr>
<td align="center">如果类对象被认为是 <strong>trivial</strong>（具备 bitwise copy semantics），没有自定义 拷贝构造函数或者赋值拷贝操作符，执行的是 Bitwise Copy</td>
<td align="center"></td>
</tr>
</tbody></table>
<br/>

<p>一个 class 在下面四种情况会表现出 <u><strong>非 bitwise copy  semantics</strong></u>：</p>
<div class="tag-common tabs" id="应该-memberwise-copy-4种情形"><ul class="nav-tabs"><li class="tab active"><a href="#应该-memberwise-copy-4种情形-1">成员对象含拷贝构造</a></li><li class="tab"><a href="#应该-memberwise-copy-4种情形-2">基类存在拷贝构造</a></li><li class="tab"><a href="#应该-memberwise-copy-4种情形-3">声明了一个或多个虚函数</a></li><li class="tab"><a href="#应该-memberwise-copy-4种情形-4">继承链上有一个或多个虚基类</a></li></ul><div class="tab-content"><div class="tab-pane active" id="应该-memberwise-copy-4种情形-1"><p>编译器必须将成员对象的拷贝构造调用操作安插在合成的 copy constructor 中。</p></div><div class="tab-pane" id="应该-memberwise-copy-4种情形-2"><p>编译器必须将基类拷贝构造调用操作安插在合成的 copy constructor 中。</p></div><div class="tab-pane" id="应该-memberwise-copy-4种情形-3"><p>拷贝操作中，目标对象的 虚函数指针（vptr）必须设定为源对象的 vptr。</p></div><div class="tab-pane" id="应该-memberwise-copy-4种情形-4"><p>拷贝操作中，目标对象的 虚基类指针（vbptr）必须设定为源对象的 vbptr。</p></div></div></div>

<br/>

<h1 id="Data-语义学（The-Semantics-of-Data）"><a href="#Data-语义学（The-Semantics-of-Data）" class="headerlink" title="Data 语义学（The Semantics of Data）"></a>Data 语义学（The Semantics of Data）</h1><p><code>本章主要讲一般的继承和虚拟继承下类成员变量的内存布局情况、编译器如何对类内成员进行存取等。</code></p>
<h2 id="字节对齐"><a href="#字节对齐" class="headerlink" title="字节对齐"></a>字节对齐</h2><p><code>内存地址 a 被称为 n 字节对齐，a 是 n 的倍数（ n 应是2的幂），也可以理解为当被访问的数据长度为 n 字节时，数据地址为 n 字节对齐。如果内存未对齐，称作 misaligned。</code></p>
<p><code>内存指针是对齐的，如果它所指的数据是对齐的。指向聚合数据（aggregate data，如struct或数组）是对齐的，当且仅当它的每个组成数据是对齐的。</code></p>
<div class="tag-common tabs" id="字节对齐"><ul class="nav-tabs"><li class="tab active"><a href="#字节对齐-1">问题引入</a></li><li class="tab"><a href="#字节对齐-2">为什么要字节对齐</a></li><li class="tab"><a href="#字节对齐-3">字节对齐原则</a></li><li class="tab"><a href="#字节对齐-4">继承下的字节对齐</a></li><li class="tab"><a href="#字节对齐-5">强制字节对齐</a></li></ul><div class="tab-content"><div class="tab-pane active" id="字节对齐-1"><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">&#123;</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span> id_<span class="token punctuation">;</span>
    <span class="token keyword">char</span> name_<span class="token punctuation">;</span>
    <span class="token keyword">float</span> salary_<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

A a<span class="token punctuation">;</span>
<span class="token comment">// sizeof (a) = ?;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><div class="tab-pane" id="字节对齐-2"><p>《Windows核心编程》里这样说：当CPU访问正确对齐的数据时，它的运行效率最高，当数据大小的数据模数的内存地址是0时，数据是对齐的。例如：WORD值应该是总是从被2除尽的地址开始，而DWORD值应该总是从被4除尽的地址开始，数据对齐不是内存结构的一部分，而是CPU结构的一部分。当CPU试图读取的数值没有正确的对齐时，CPU可以执行两种操作之一：产生一个异常条件；执行多次对齐的内存访问，以便读取完整的未对齐数据，若多次执行内存访问，应用程序的运行速度就会慢。</p></div><div class="tab-pane" id="字节对齐-3"><p>在系统默认的对齐方式下，每个成员相对于这个结构体变量地址的偏移量正好是该成员类型所占字节的整数倍，且最终占用字节数为成员类型中最大占用字节数的整数倍。例子中，id_ 的偏移量为 0（0 * 4），name_ 的偏移量为4（1 * 4），salary_ 的偏移量为（2 * 4），总共占用12字节，满足成员中最大占用字节数（ float ）的整数倍（3 * 4）。</p></div><div class="tab-pane" id="字节对齐-4"></div><div class="tab-pane" id="字节对齐-5"><p>#pragma directive指定对齐的包入（packing）</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression"><span class="token function">pack</span><span class="token punctuation">(</span>push<span class="token punctuation">)</span>  </span><span class="token comment">/* push current alignment to stack */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression"><span class="token function">pack</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>     </span><span class="token comment">/* set alignment to 1 byte boundary */</span></span>

<span class="token keyword">struct</span> <span class="token class-name">MyPackedData</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">char</span> Data1<span class="token punctuation">;</span>
    <span class="token keyword">long</span> Data2<span class="token punctuation">;</span>
    <span class="token keyword">char</span> Data3<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression"><span class="token function">pack</span><span class="token punctuation">(</span>pop<span class="token punctuation">)</span>   </span><span class="token comment">/* restore original alignment from stack */</span></span>

<span class="token comment">// 这个结构在32位系统的大小为6字节。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></div></div>

<br/>

<h1 id="Function-语义学（The-Semantics-of-Function）"><a href="#Function-语义学（The-Semantics-of-Function）" class="headerlink" title="Function 语义学（The Semantics of Function）"></a>Function 语义学（The Semantics of Function）</h1><p><code>本章主要讲编译器如何让类成员函数和普通函数一样具有相同的使用效率、编译器为类成员函数做了哪些优化、编译器如何针对单一继承、多重继承和虚继承下的虚函数的区分处理、讨论指向一个类成员函数指针和一个类成员虚函数指针以及多重继承下的类成员函数指针的多态性。</code></p>
<br/>

<h1 id="构造、析构、拷贝语义学（Semantics-of-Construction-Destruction-Copy）"><a href="#构造、析构、拷贝语义学（Semantics-of-Construction-Destruction-Copy）" class="headerlink" title="构造、析构、拷贝语义学（Semantics of Construction, Destruction, Copy）"></a>构造、析构、拷贝语义学（Semantics of Construction, Destruction, Copy）</h1><p><code>本章主要介绍一般无继承情况下，初始化列表在构造函数的扩展方式。介绍多继承、虚继承下，继承链的构造顺序、析构顺序，虚函数表指针 vptr 的设定时机。讨论何时应该设计一个拷贝赋值操作（copy assignment operator）</code></p>
<h2 id="构造语义学"><a href="#构造语义学" class="headerlink" title="构造语义学"></a>构造语义学</h2><p>无继承关系下，C++ 的构造情况：</p>
<div class="tag-common tabs" id="无继承关系下的构造情况"><ul class="nav-tabs"><li class="tab active"><a href="#无继承关系下的构造情况-1">POD 类型</a></li><li class="tab"><a href="#无继承关系下的构造情况-2">抽象数据类型</a></li><li class="tab"><a href="#无继承关系下的构造情况-3">虚析构定义视情况而定</a></li></ul><div class="tab-content"><div class="tab-pane active" id="无继承关系下的构造情况-1"><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// 会被贴上 POD 的标签</span>
<span class="token keyword">struct</span> <span class="token class-name">Point</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">float</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// 行为如同 C 一样, global 被视为 临时性定义，</span>
<span class="token comment">// 没有明确定义，这些全局示例会被连接器折叠起来，只留下单独一个实体，</span>
<span class="token comment">// 被放在程序（data segment 中一个特别保留给未初始化的 global 对象使用）</span>
<span class="token comment">// 这个空间叫 BSS (Block Started by Symbol)</span>
Point p<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><div class="tab-pane" id="无继承关系下的构造情况-2"><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// 显式初始化列表</span>
<span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">&#123;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Point</span><span class="token punctuation">(</span><span class="token keyword">float</span> x <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token keyword">float</span> y <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token keyword">float</span> z <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">)</span> 
        <span class="token operator">:</span> <span class="token function">x_</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span>
    	  <span class="token function">y_</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">float</span> x_<span class="token punctuation">,</span> y_<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// 可以定义实话为 local object </span>
<span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
    Point local<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// 编译器层面会有一个优化机制来识别 inline constructors, 提供一个 member-by-member 的常量指定操作</span>
<span class="token comment">// 被附加上 Point 的默认构造函数内联扩展</span>
<span class="token punctuation">&#123;</span>
    Point local<span class="token punctuation">;</span>
    local<span class="token punctuation">.</span>x_ <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
    local<span class="token punctuation">.</span>y_ <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// 如果在堆上分配一个 Point 实例对象</span>
<span class="token punctuation">&#123;</span>
    Point <span class="token operator">*</span> p <span class="token operator">=</span> <span class="token keyword">new</span> Point<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//  C++ 伪代码</span>
<span class="token punctuation">&#123;</span>
    Point <span class="token operator">*</span> heap <span class="token operator">=</span> <span class="token function">__new</span><span class="token punctuation">(</span> <span class="token keyword">sizeof</span> <span class="token punctuation">(</span>Point<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>heap <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        heap<span class="token operator">-></span><span class="token class-name">Point</span><span class="token double-colon punctuation">::</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// 因为没有明确地提供一个 析构 函数实体</span>
<span class="token comment">// 不会调用析构</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">delete</span> heap<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><div class="tab-pane" id="无继承关系下的构造情况-3"><p>因为一个类如果定义了虚函数，则每个实例化对象就会要多拥有 一个指向 虚函数表的 vptr，产生膨胀，例子中 Point 的构造函数也会被编译器处理成：</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">Point<span class="token operator">*</span> <span class="token class-name">Point</span><span class="token double-colon punctuation">::</span><span class="token function">Point</span> <span class="token punctuation">(</span>Point <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">float</span> x<span class="token punctuation">,</span> <span class="token keyword">float</span> y<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 设定 object 的 virtual table pointer （vptr）</span>
    <span class="token keyword">this</span><span class="token operator">-></span>__vptr_Point <span class="token operator">=</span> __vtpr_point<span class="token punctuation">;</span>
    
    <span class="token keyword">this</span><span class="token operator">-></span>x_ <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token operator">-></span>y_ <span class="token operator">=</span> y<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></div></div>



<p>继承体系下，构造的顺序是先从继承链上的最上层的基类依次往下调用派生类的构造函数来完成。</p>
<br/>

<h2 id="复制语义学"><a href="#复制语义学" class="headerlink" title="复制语义学"></a>复制语义学</h2><p>当我们设计一个 class，我们可以指定种关于复制构造的选择：</p>
<p><code>1、什么都不做，使用默认复制构造。</code></p>
<p><code>2、提供一个显式的 拷贝赋值 operator。</code></p>
<p><code>3、明确拒绝对象给另一个对象的复制构造行为。</code></p>
<p>如果一个类已经有了浅拷贝（bitwise copy）语意，隐式拷贝赋值操作符（copy assignment operator）被视为无效，所以一个类会在如下四种情况表现出深拷贝（memberwise copy）语意：</p>
<p><code>1、当一个 class 内带一个 成员对象，成员对象所属类本身有一个拷贝赋值操作符时。</code></p>
<p><code>2、当一个 class 的基类有一个拷贝赋值操作符时。</code></p>
<p><code>3、当一个 class 声明了任何的 virtual functions（一定不能拷贝右端 class 对象的 vptr 地址，因为可能是一个 继承类对象）。</code></p>
<p><code>4、当一个 class 继承自一个虚基类时（不论 虚基类有没有 copy operator）。</code></p>
<p><strong>尽量不要允许一个虚基类的拷贝操作！！！</strong></p>
<br/>

<h2 id="析构语义学"><a href="#析构语义学" class="headerlink" title="析构语义学"></a>析构语义学</h2><p>析构函数的执行顺序和构造函数的相反：</p>
<p><code>1、当前 class 实例化对象的析构首先被执行。</code></p>
<p><code>2、如果 class 中拥有多个成员对象，成员对象们拥有析构函数，那么它们会以其声明顺序的相反顺序被调用。</code></p>
<p><code>3、如果 class 实例化对象内带一个 vptr，则会被重新设定，指向适当的基类 虚函数表。</code></p>
<p><code>读者注：3说明了为什么基类定义了虚析构函数，在形如 Base* p = new Derived() 时， delete p； 后可以调用到派生类的析构函数，因为 vptr 会被依次调整，找到虚函数表中，各个继承链中虚析构函数来调用。只要基类定义了虚析构函数，继承类的析构函数不管加不加 virtual 关键字，都是虚函数，都会出现在 vtable 中。</code></p>
<br/>

<h1 id="执行期语义学（Runtime-Semantics）"><a href="#执行期语义学（Runtime-Semantics）" class="headerlink" title="执行期语义学（Runtime Semantics）"></a>执行期语义学（Runtime Semantics）</h1><p><code>本章主要讨论程序执行期发生的转换、</code></p>
<br/>

<h1 id="站在对象模型的类端（On-the-Cusp-of-the-Object-Model）"><a href="#站在对象模型的类端（On-the-Cusp-of-the-Object-Model）" class="headerlink" title="站在对象模型的类端（On the Cusp of the Object Model）"></a>站在对象模型的类端（On the Cusp of the Object Model）</h1>
        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2022/06/18/STL/%E6%8B%86%E4%B9%A6%E7%B3%BB%E5%88%97%E4%B9%8B%E3%80%8ASTL%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90%E3%80%8B%E5%BA%8F%E5%88%97%E5%BC%8F%E5%AE%B9%E5%99%A8%EF%BC%88sequence%20containers%EF%BC%89/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/me.png" alt="Joy Chen's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        joychenisno1@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="joychenisno1@gmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2022/06/">六月 2022<span class="sidebar_archives-count">14</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/C/">C++<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/C-%E6%96%B0%E7%89%B9%E6%80%A7/">C++新特性<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/STL/">STL<span class="sidebar_archives-count">5</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year></span>&nbsp;进阶之路
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?Bn9UzEm8RrBSxqyZB0zPjA==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>













<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('
<link rel="stylesheet" href="/css/uc.css">
');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 0000;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        <!-- hexo injector body_end start --><script src="/js/tag-common/index.js"></script><!-- hexo injector body_end end --></body>
    
</html>
