<mxfile host="Electron" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/24.7.8 Chrome/128.0.6613.36 Electron/32.0.1 Safari/537.36" version="24.7.8">
  <diagram name="第 1 页" id="7EOHxMsu4iQ1k6dsOhqW">
    <mxGraphModel dx="1035" dy="756" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" source="yNyfA-rY7VgK4Vg0AegA-1" target="yNyfA-rY7VgK4Vg0AegA-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-1" value="&lt;font&gt;recvq 非空&lt;/font&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;?&lt;/span&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fontFamily=monaco;fillColor=#f8cecc;strokeColor=#b85450;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" vertex="1">
          <mxGeometry x="344" y="325" width="140" height="70" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-3" value="开始发送" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fontFamily=monaco;fontSize=14;fontStyle=1;fillColor=#dae8fc;strokeColor=#6c8ebf;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" vertex="1">
          <mxGeometry x="349" y="190" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" source="yNyfA-rY7VgK4Vg0AegA-4" target="yNyfA-rY7VgK4Vg0AegA-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-4" value="G = recvq.Pop()&amp;nbsp;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=monaco;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" vertex="1">
          <mxGeometry x="120" y="324" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-5" value="结束发送" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fontFamily=monaco;fontSize=14;fontStyle=1;fillColor=#dae8fc;strokeColor=#6c8ebf;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" vertex="1">
          <mxGeometry x="344" y="740" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.6;entryDx=0;entryDy=0;entryPerimeter=0;spacing=3;strokeWidth=2;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" source="yNyfA-rY7VgK4Vg0AegA-1" target="yNyfA-rY7VgK4Vg0AegA-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-23" value="&lt;font face=&quot;monaco&quot;&gt;&lt;b&gt;Y&lt;/b&gt;&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];movable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" vertex="1" connectable="0" parent="yNyfA-rY7VgK4Vg0AegA-6">
          <mxGeometry x="-0.1791" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" source="yNyfA-rY7VgK4Vg0AegA-7" target="yNyfA-rY7VgK4Vg0AegA-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-7" value="写入数据 -&amp;gt; G" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=monaco;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" vertex="1">
          <mxGeometry x="120" y="460" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-9" value="wake up G" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=monaco;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" vertex="1">
          <mxGeometry x="120" y="580" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=2;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" source="yNyfA-rY7VgK4Vg0AegA-3" target="yNyfA-rY7VgK4Vg0AegA-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-16" value="&lt;font face=&quot;monaco&quot;&gt;&lt;b&gt;Y&lt;/b&gt;&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" source="yNyfA-rY7VgK4Vg0AegA-12" target="yNyfA-rY7VgK4Vg0AegA-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" source="yNyfA-rY7VgK4Vg0AegA-12" target="yNyfA-rY7VgK4Vg0AegA-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-22" value="&lt;font face=&quot;monaco&quot;&gt;&lt;b&gt;N&lt;/b&gt;&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];movable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="yNyfA-rY7VgK4Vg0AegA-21" vertex="1" connectable="0">
          <mxGeometry x="-0.0847" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-12" value="buf 有空位？" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fontFamily=monaco;fillColor=#f8cecc;strokeColor=#b85450;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" vertex="1">
          <mxGeometry x="344" y="455" width="140" height="70" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.005;entryY=0.579;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=2;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" source="yNyfA-rY7VgK4Vg0AegA-9" target="yNyfA-rY7VgK4Vg0AegA-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-15" value="写入数据 -&amp;gt; buf" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=monaco;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" vertex="1">
          <mxGeometry x="349" y="600" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.539;entryY=0.007;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=2;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" source="yNyfA-rY7VgK4Vg0AegA-15" target="yNyfA-rY7VgK4Vg0AegA-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" source="yNyfA-rY7VgK4Vg0AegA-18" target="yNyfA-rY7VgK4Vg0AegA-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-18" value="（1）当前 &lt;font color=&quot;#ff0000&quot;&gt;G&#39;&lt;/font&gt; -&amp;gt; sendq,&amp;nbsp;&lt;div&gt;（2）sleep, hang,&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;wait&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=monaco;align=center;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" vertex="1">
          <mxGeometry x="570" y="460" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-19" value="&lt;div&gt;（1）取走&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;font style=&quot;background-color: initial;&quot; color=&quot;#ff0000&quot;&gt;G&#39; &lt;/font&gt;&lt;font color=&quot;#1a1a1a&quot; style=&quot;background-color: initial;&quot;&gt;的数据&lt;/font&gt;&lt;/div&gt;（2）wake up &lt;font color=&quot;#ff0000&quot;&gt;G&#39;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=monaco;align=left;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" vertex="1">
          <mxGeometry x="570" y="600" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.001;entryY=0.602;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=2;movable=0;resizable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" source="yNyfA-rY7VgK4Vg0AegA-19" target="yNyfA-rY7VgK4Vg0AegA-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-24" value="&lt;font face=&quot;monaco&quot; style=&quot;font-size: 14px;&quot;&gt;特别的，当写入数据时，发现 recvq 不为空，说明缓冲区中没有数据，&lt;/font&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font face=&quot;monaco&quot; style=&quot;font-size: 14px;&quot;&gt;这时候直接把原本要写入的数据直接传递给recvq 队列的第一个goroutine，妙哉！&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font face=&quot;monaco&quot; style=&quot;font-size: 14px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;div style=&quot;background-color: rgb(24, 24, 24); color: rgb(185, 183, 179);&quot;&gt;&lt;pre style=&quot;&quot;&gt;&lt;font face=&quot;monaco&quot; style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;color:#c679dd;&quot;&gt;func &lt;/span&gt;func &lt;span style=&quot;white-space-collapse: collapse; color: rgb(97, 174, 239);&quot;&gt;chansend&lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse; color: rgb(166, 178, 192);&quot;&gt;()&lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse; color: rgb(198, 121, 221);&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse; color: rgb(166, 178, 192);&quot;&gt;{&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;&quot;&gt;&lt;span style=&quot;white-space-collapse: collapse; color: rgb(166, 178, 192);&quot;&gt;&lt;font face=&quot;monaco&quot; style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; // ...&lt;/font&gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre style=&quot;&quot;&gt;&lt;font face=&quot;monaco&quot; style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;color:#c679dd;&quot;&gt;  if &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;sg &lt;/span&gt;&lt;span style=&quot;color:#61afef;&quot;&gt;:= &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;c&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;recvq&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#61aeef;&quot;&gt;dequeue&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;(); &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;sg &lt;/span&gt;&lt;span style=&quot;color:#61afef;&quot;&gt;!= &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;nil &lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;{&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#59626f;font-style:italic;&quot;&gt;// Found a waiting receiver. We pass the value we want to send&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#59626f;font-style:italic;&quot;&gt;    // directly to the receiver, bypassing the channel buffer (if any).&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#59626f;font-style:italic;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#61aeef;&quot;&gt;send&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;c&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;sg&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;ep&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color:#c679dd;&quot;&gt;func&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;() { &lt;/span&gt;&lt;span style=&quot;color:#61aeef;&quot;&gt;unlock&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#61afef;&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;c&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;lock&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;) }, &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;)&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#c679dd;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;true&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;  }&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(166, 178, 192);&quot;&gt;&lt;font face=&quot;monaco&quot; style=&quot;font-size: 14px;&quot;&gt;}&lt;/font&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="120" y="820" width="620" height="290" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-25" value="&lt;font style=&quot;font-size: 18px;&quot; face=&quot;monaco&quot;&gt;写入数据&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontStyle=1;fontSize=18;movable=0;rotatable=0;deletable=0;editable=0;locked=1;connectable=0;" parent="1" vertex="1">
          <mxGeometry x="70" y="140" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-26" value="&lt;font style=&quot;font-size: 18px;&quot; face=&quot;monaco&quot;&gt;读取数据&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontStyle=1;fontSize=18;" parent="1" vertex="1">
          <mxGeometry x="70" y="1200" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-27" value="&lt;span style=&quot;color: rgba(0, 0, 0, 0); font-family: monospace; font-size: 0px;&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%26lt%3Bfont%20face%3D%26quot%3Bmonaco%26quot%3B%20style%3D%26quot%3Bfont-size%3A%2014px%3B%26quot%3B%26gt%3B%E7%89%B9%E5%88%AB%E7%9A%84%EF%BC%8C%E5%BD%93%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE%E6%97%B6%EF%BC%8C%E5%8F%91%E7%8E%B0%20recvq%20%E4%B8%8D%E4%B8%BA%E7%A9%BA%EF%BC%8C%E8%AF%B4%E6%98%8E%E7%BC%93%E5%86%B2%E5%8C%BA%E4%B8%AD%E6%B2%A1%E6%9C%89%E6%95%B0%E6%8D%AE%EF%BC%8C%26lt%3B%2Ffont%26gt%3B%26lt%3Bdiv%20style%3D%26quot%3Bfont-size%3A%2014px%3B%26quot%3B%26gt%3B%26lt%3Bfont%20face%3D%26quot%3Bmonaco%26quot%3B%20style%3D%26quot%3Bfont-size%3A%2014px%3B%26quot%3B%26gt%3B%E8%BF%99%E6%97%B6%E5%80%99%E7%9B%B4%E6%8E%A5%E6%8A%8A%E5%8E%9F%E6%9C%AC%E8%A6%81%E5%86%99%E5%85%A5%E7%9A%84%E6%95%B0%E6%8D%AE%E7%9B%B4%E6%8E%A5%E4%BC%A0%E9%80%92%E7%BB%99recvq%20%E9%98%9F%E5%88%97%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AAgoroutine%EF%BC%8C%E5%A6%99%E5%93%89%EF%BC%81%26lt%3B%2Ffont%26gt%3B%26lt%3B%2Fdiv%26gt%3B%26lt%3Bdiv%20style%3D%26quot%3Bfont-size%3A%2014px%3B%26quot%3B%26gt%3B%26lt%3Bfont%20face%3D%26quot%3Bmonaco%26quot%3B%20style%3D%26quot%3Bfont-size%3A%2014px%3B%26quot%3B%26gt%3B%26lt%3Bbr%26gt%3B%26lt%3B%2Ffont%26gt%3B%26lt%3B%2Fdiv%26gt%3B%26lt%3Bdiv%20style%3D%26quot%3Bfont-size%3A%2014px%3B%26quot%3B%26gt%3B%26lt%3Bdiv%20style%3D%26quot%3Bbackground-color%3A%20rgb(24%2C%2024%2C%2024)%3B%20color%3A%20rgb(185%2C%20183%2C%20179)%3B%26quot%3B%26gt%3B%26lt%3Bpre%20style%3D%26quot%3B%26quot%3B%26gt%3B%26lt%3Bfont%20face%3D%26quot%3Bmonaco%26quot%3B%20style%3D%26quot%3Bfont-size%3A%2014px%3B%26quot%3B%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23c679dd%3B%26quot%3B%26gt%3Bfunc%20%26lt%3B%2Fspan%26gt%3Bfunc%20%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(97%2C%20174%2C%20239)%3B%26quot%3B%26gt%3Bchansend%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(166%2C%20178%2C%20192)%3B%26quot%3B%26gt%3B(%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(209%2C%20154%2C%20102)%3B%26quot%3B%26gt%3Bc%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(97%2C%20175%2C%20239)%3B%26quot%3B%26gt%3B*%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(198%2C%20121%2C%20221)%3B%26quot%3B%26gt%3Bhchan%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(166%2C%20178%2C%20192)%3B%26quot%3B%26gt%3B%2C%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(209%2C%20154%2C%20102)%3B%26quot%3B%26gt%3Bep%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(229%2C%20193%2C%20124)%3B%26quot%3B%26gt%3Bunsafe%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(166%2C%20178%2C%20192)%3B%26quot%3B%26gt%3B.%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(198%2C%20121%2C%20221)%3B%26quot%3B%26gt%3BPointer%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(166%2C%20178%2C%20192)%3B%26quot%3B%26gt%3B%2C%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(209%2C%20154%2C%20102)%3B%26quot%3B%26gt%3Bblock%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(198%2C%20121%2C%20221)%3B%26quot%3B%26gt%3Bbool%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(166%2C%20178%2C%20192)%3B%26quot%3B%26gt%3B%2C%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(209%2C%20154%2C%20102)%3B%26quot%3B%26gt%3Bcallerpc%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(198%2C%20121%2C%20221)%3B%26quot%3B%26gt%3Buintptr%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(166%2C%20178%2C%20192)%3B%26quot%3B%26gt%3B)%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(198%2C%20121%2C%20221)%3B%26quot%3B%26gt%3Bbool%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(166%2C%20178%2C%20192)%3B%26quot%3B%26gt%3B%7B%26lt%3B%2Fspan%26gt%3B%26lt%3B%2Ffont%26gt%3B%26lt%3B%2Fpre%26gt%3B%26lt%3Bpre%20style%3D%26quot%3B%26quot%3B%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bwhite-space-collapse%3A%20collapse%3B%20color%3A%20rgb(166%2C%20178%2C%20192)%3B%26quot%3B%26gt%3B%26lt%3Bfont%20face%3D%26quot%3Bmonaco%26quot%3B%20style%3D%26quot%3Bfont-size%3A%2014px%3B%26quot%3B%26gt%3B%26amp%3Bnbsp%3B%20%2F%2F%20...%26lt%3B%2Ffont%26gt%3B%26lt%3B%2Fspan%26gt%3B%26lt%3B%2Fpre%26gt%3B%26lt%3Bpre%20style%3D%26quot%3B%26quot%3B%26gt%3B%26lt%3Bfont%20face%3D%26quot%3Bmonaco%26quot%3B%20style%3D%26quot%3Bfont-size%3A%2014px%3B%26quot%3B%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23c679dd%3B%26quot%3B%26gt%3B%20%20if%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23d19a66%3B%26quot%3B%26gt%3Bsg%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%2361afef%3B%26quot%3B%26gt%3B%3A%3D%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23d19a66%3B%26quot%3B%26gt%3Bc%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B.%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23d19a66%3B%26quot%3B%26gt%3Brecvq%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B.%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%2361aeef%3B%26quot%3B%26gt%3Bdequeue%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B()%3B%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23d19a66%3B%26quot%3B%26gt%3Bsg%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%2361afef%3B%26quot%3B%26gt%3B!%3D%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23d19a66%3B%26quot%3B%26gt%3Bnil%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B%7B%26lt%3Bbr%26gt%3B%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B%20%20%20%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%2359626f%3Bfont-style%3Aitalic%3B%26quot%3B%26gt%3B%2F%2F%20Found%20a%20waiting%20receiver.%20We%20pass%20the%20value%20we%20want%20to%20send%26lt%3Bbr%26gt%3B%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%2359626f%3Bfont-style%3Aitalic%3B%26quot%3B%26gt%3B%20%20%20%20%2F%2F%20directly%20to%20the%20receiver%2C%20bypassing%20the%20channel%20buffer%20(if%20any).%26lt%3Bbr%26gt%3B%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%2359626f%3Bfont-style%3Aitalic%3B%26quot%3B%26gt%3B%20%20%20%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%2361aeef%3B%26quot%3B%26gt%3Bsend%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B(%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23d19a66%3B%26quot%3B%26gt%3Bc%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B%2C%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23d19a66%3B%26quot%3B%26gt%3Bsg%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B%2C%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23d19a66%3B%26quot%3B%26gt%3Bep%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B%2C%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23c679dd%3B%26quot%3B%26gt%3Bfunc%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B()%20%7B%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%2361aeef%3B%26quot%3B%26gt%3Bunlock%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B(%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%2361afef%3B%26quot%3B%26gt%3B%26amp%3Bamp%3B%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23d19a66%3B%26quot%3B%26gt%3Bc%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B.%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23d19a66%3B%26quot%3B%26gt%3Block%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B)%20%7D%2C%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23d19a66%3B%26quot%3B%26gt%3B3%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B)%26lt%3Bbr%26gt%3B%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B%20%20%20%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23c679dd%3B%26quot%3B%26gt%3Breturn%20%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23d19a66%3B%26quot%3B%26gt%3Btrue%26lt%3Bbr%26gt%3B%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%23a6b2c0%3B%26quot%3B%26gt%3B%20%20%7D%26lt%3B%2Fspan%26gt%3B%26lt%3B%2Ffont%26gt%3B%26lt%3B%2Fpre%26gt%3B%26lt%3Bpre%20style%3D%26quot%3B%26quot%3B%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%20rgb(166%2C%20178%2C%20192)%3B%26quot%3B%26gt%3B%26lt%3Bfont%20face%3D%26quot%3Bmonaco%26quot%3B%20style%3D%26quot%3Bfont-size%3A%2014px%3B%26quot%3B%26gt%3B%7D%26lt%3B%2Ffont%26gt%3B%26lt%3B%2Fspan%26gt%3B%26lt%3B%2Fpre%26gt%3B%26lt%3B%2Fdiv%26gt%3B%26lt%3B%2Fdiv%26gt%3B%22%20style%3D%22text%3Bhtml%3D1%3Balign%3Dleft%3BverticalAlign%3Dmiddle%3Bresizable%3D0%3Bpoints%3D%5B%5D%3Bautosize%3D1%3BstrokeColor%3Dnone%3BfillColor%3Dnone%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%22100%22%20y%3D%22820%22%20width%3D%22730%22%20height%3D%22290%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="160" y="2440" width="20" height="30" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-28" value="&lt;font face=&quot;monaco&quot;&gt;类似的，sendq 不为空， buf&amp;nbsp; nil or empty, 直接从 sendq 队列的第一个 goroutine 获取数据。&lt;/font&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="120" y="2290" width="600" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNyfA-rY7VgK4Vg0AegA-29" value="&lt;div style=&quot;background-color:#181818;color:#b9b7b3&quot;&gt;&lt;pre style=&quot;font-family:&#39;Monaco-Light&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;div&gt;&lt;pre style=&quot;font-family:&#39;Monaco-Light&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#c679dd;&quot;&gt;func &lt;/span&gt;&lt;span style=&quot;color:#61aeef;&quot;&gt;chanrecv&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt; {&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;Monaco-Light&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#c679dd;&quot;&gt;  if &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;sg &lt;/span&gt;&lt;span style=&quot;color:#61afef;&quot;&gt;:= &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;c&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;sendq&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#61aeef;&quot;&gt;dequeue&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;(); &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;sg &lt;/span&gt;&lt;span style=&quot;color:#61afef;&quot;&gt;!= &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;nil &lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;{&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#59626f;font-style:italic;&quot;&gt;// Found a waiting sender. If buffer is size 0, receive value&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#59626f;font-style:italic;&quot;&gt;    // directly from sender. Otherwise, receive from head of queue&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#59626f;font-style:italic;&quot;&gt;    // and add sender&#39;s value to the tail of the queue (both map to&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#59626f;font-style:italic;&quot;&gt;    // the same buffer slot because the queue is full).&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#59626f;font-style:italic;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#61aeef;&quot;&gt;recv&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;c&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;sg&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;ep&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color:#c679dd;&quot;&gt;func&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;() { &lt;/span&gt;&lt;span style=&quot;color:#61aeef;&quot;&gt;unlock&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#61afef;&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;c&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;lock&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;) }, &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;)&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#c679dd;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;true&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;true&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;  }&lt;/span&gt;&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;Monaco-Light&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#a6b2c0;&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="130" y="2320" width="820" height="240" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-30" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-3" target="799hmMAGvSvtl3Q7Zqra-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-31" value="Y" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];rounded=1;strokeColor=#6c8ebf;strokeWidth=2;arcSize=14;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;fillColor=#dae8fc;" vertex="1" connectable="0" parent="799hmMAGvSvtl3Q7Zqra-30">
          <mxGeometry x="-0.297" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-3" value="sendq 非空？" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fontFamily=monaco;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="524" y="1375" width="140" height="70" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-4" value="开始接收" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fontFamily=monaco;fontSize=14;fontStyle=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="529" y="1240" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-26" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-6" target="799hmMAGvSvtl3Q7Zqra-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-27" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];rounded=1;strokeColor=#6c8ebf;strokeWidth=2;arcSize=14;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;fillColor=#dae8fc;" vertex="1" connectable="0" parent="799hmMAGvSvtl3Q7Zqra-26">
          <mxGeometry x="-0.6645" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-28" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-6" target="799hmMAGvSvtl3Q7Zqra-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-29" value="Y" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];rounded=1;strokeColor=#6c8ebf;strokeWidth=2;arcSize=14;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;fillColor=#dae8fc;" vertex="1" connectable="0" parent="799hmMAGvSvtl3Q7Zqra-28">
          <mxGeometry x="-0.2074" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-6" value="BUF != 0?" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fontFamily=monaco;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="270" y="1380" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-40" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-7" target="799hmMAGvSvtl3Q7Zqra-39">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="245" y="2190" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-7" value="wake up G" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fontFamily=monaco;fontSize=14;fontStyle=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="180" y="2040" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-33" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-10" target="799hmMAGvSvtl3Q7Zqra-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-10" value="from sendq -&amp;gt; G" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=monaco;" vertex="1" parent="1">
          <mxGeometry x="99" y="1530" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=2;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-4" target="799hmMAGvSvtl3Q7Zqra-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-43" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-15" target="799hmMAGvSvtl3Q7Zqra-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-44" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];rounded=1;strokeColor=#6c8ebf;strokeWidth=2;arcSize=14;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;fillColor=#dae8fc;" vertex="1" connectable="0" parent="799hmMAGvSvtl3Q7Zqra-43">
          <mxGeometry x="-0.2888" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-45" value="Y" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-15" target="799hmMAGvSvtl3Q7Zqra-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-15" value="qcount &amp;gt; 0?" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fontFamily=monaco;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="524" y="1530" width="140" height="70" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-36" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-17" target="799hmMAGvSvtl3Q7Zqra-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-17" value="from sendq -&amp;gt; G" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=monaco;" vertex="1" parent="1">
          <mxGeometry x="270" y="1660" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-48" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;dashed=1;opacity=60;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-20" target="799hmMAGvSvtl3Q7Zqra-47">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-20" value="(1) 将当前 &lt;font color=&quot;#ff0000&quot;&gt;G&#39; &lt;/font&gt;&lt;font color=&quot;#1a1a1a&quot;&gt;加入 recvq&lt;/font&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(26, 26, 26); background-color: initial;&quot;&gt;(2) sleep, hang, wait&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=monaco;align=left;" vertex="1" parent="1">
          <mxGeometry x="750" y="1535" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-49" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-21" target="799hmMAGvSvtl3Q7Zqra-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-21" value="from buf -&amp;gt; data" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=monaco;align=left;" vertex="1" parent="1">
          <mxGeometry x="531" y="1660" width="126" height="60" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-34" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-25" target="799hmMAGvSvtl3Q7Zqra-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-25" value="from buf -&amp;gt; data&amp;nbsp;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=monaco;" vertex="1" parent="1">
          <mxGeometry x="270" y="1530" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-38" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-32" target="799hmMAGvSvtl3Q7Zqra-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-32" value="from G -&amp;gt; data" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=monaco;" vertex="1" parent="1">
          <mxGeometry x="99" y="1660" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-37" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-35" target="799hmMAGvSvtl3Q7Zqra-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-35" value="data from G&lt;div&gt;-&amp;gt;&lt;/div&gt;&lt;div&gt;buf 队尾&amp;nbsp;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=monaco;" vertex="1" parent="1">
          <mxGeometry x="270" y="1810" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-39" value="结束接收" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fontFamily=monaco;fontSize=14;fontStyle=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="414" y="2160" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-41" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-3" target="799hmMAGvSvtl3Q7Zqra-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-42" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];rounded=1;strokeColor=#6c8ebf;strokeWidth=2;arcSize=14;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;fillColor=#dae8fc;" vertex="1" connectable="0" parent="799hmMAGvSvtl3Q7Zqra-41">
          <mxGeometry x="-0.3373" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-51" style="edgeStyle=orthogonalEdgeStyle;shape=connector;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;strokeWidth=2;align=center;verticalAlign=middle;fontFamily=monaco;fontSize=14;fontColor=default;fontStyle=1;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="799hmMAGvSvtl3Q7Zqra-47" target="799hmMAGvSvtl3Q7Zqra-39">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="840" y="2190" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="799hmMAGvSvtl3Q7Zqra-47" value="&lt;div&gt;（1）data -&amp;gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;font style=&quot;background-color: initial;&quot; color=&quot;#ff0000&quot;&gt;G&#39; &lt;/font&gt;&lt;font color=&quot;#1a1a1a&quot; style=&quot;background-color: initial;&quot;&gt;的数据&lt;/font&gt;&lt;/div&gt;（2）wake up &lt;font color=&quot;#ff0000&quot;&gt;G&#39;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=monaco;align=left;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" parent="1">
          <mxGeometry x="750" y="1670" width="180" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
